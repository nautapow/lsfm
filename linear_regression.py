import numpy as np
from scipy.stats import linregress
import pandas as pd

def test_trend_significance(x_values, y_values):
    """
    Performs linear regression on given x and y values
    and returns slope, p-value, and interpretation.
    
    Parameters:
        x_values (list or array): Independent variable.
        y_values (list or array): Dependent variable.

    Returns:
        slope (float): Slope of the regression line.
        p_value (float): P-value indicating significance.
        significant (bool): True if p < 0.05.
    """
    # Convert to numpy arrays for safety
    x = np.array(x_values)
    y = np.array(y_values)
    
    slope, intercept, r_value, p_value, std_err = linregress(x, y)
    
    print(f"Slope: {slope:.4f}")
    print(f"P-value: {p_value:.4g}")
    if p_value < 0.05:
        print("There is a significant trend (p < 0.05).")
    else:
        print("No significant trend (p >= 0.05).")
    
    return slope, p_value, p_value < 0.05



# Example usage
# =============================================================================
# data = [20893.21352, 9094.299399, 10446.60676, 12000, 18188.5988, 6892.19013, 6000, 3958.523732, 
#         6892.19013, 10446.60676, 15834.09493, 10446.60676, 24000, 24000, 55137.52104, 3000, 3000, 
#         4547.1497, 12000, 55137.52104, 13784.38026, 6892.19013, 6892.19013]
# patch = [0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.590446851072036, 
#          0.590446851072036,0.443076923076923,-0.407179487179487,-0.649516193169265, 0.516606498194945, 0.516606498194945,
#          0.0913945682026243, -0.165598551578463, -0.324628182037618, -0.324628182037618, -0.339311334289813, 0.0314965498478962, 1.09468750772883,
#          1.09468750772883, 0.3904920913884, -0.838755304101839]
# =============================================================================
data = [20893.21352, 9094.299399, 10446.60676, 12000, 18188.5988, 6892.19013, 6000, 3958.523732, 
        6892.19013, 10446.60676, 15834.09493, 10446.60676, 24000, 24000, 3000, 3000, 
        4547.1497, 12000, 13784.38026, 6892.19013, 6892.19013]
patch = [0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.282984550862327,0.590446851072036, 
         0.590446851072036,0.443076923076923,-0.407179487179487,-0.649516193169265, 0.516606498194945, 0.516606498194945,
         0.0913945682026243, -0.324628182037618, -0.324628182037618, -0.339311334289813, 0.0314965498478962,
         1.09468750772883, 0.3904920913884, -0.838755304101839]
test_trend_significance(patch, data)